# Proof Verification Relayer - Production Config (Rarimo L2 Mainnet)
# Server: 173.212.214.147 (api.iranians.vote)
# Reference: https://github.com/rarimo/passport-voting-contracts

log:
  level: info
  disable_sentry: true

listener:
  addr: :8000

# PostgreSQL connection
db:
  url: "postgres://${POSTGRES_USER:-rarimo}:${POSTGRES_PASSWORD}@postgres:5432/proof_verification?sslmode=disable"

# Vault disabled - using direct private key
# NOTE: Even when disabled, vault config requires addr, mount_path, and secrets
vault:
  addr: "http://127.0.0.1:8200"
  mount_path: "secret"
  disabled: true
  secrets:
    relayer:
      private_key: "${RELAYER_PRIVATE_KEY}"

network:
  # Rarimo L2 Mainnet RPC
  rpc: "https://l2.rarimo.com"
  gas_multiplier: 1.23

  # Admin wallet: 0x7DCFcCd0f80C3eED4dBcac1B597E667E0D0F731c
  private_key: "${RELAYER_PRIVATE_KEY}"

# Smart contract addresses (from passport-contracts beta-release)
# NOTE: proposer and voting_registry required by service even if not used
contracts:
  voting_registry:
    address: "0x0000000000000000000000000000000000000000"
  proposer:
    address: "0x0000000000000000000000000000000000000000"
  lightweight_state:
    address: "0x61aa5b68D811884dA4FEC2De4a7AA0464df166E1"
  register2:
    address: "0x11BB4B14AA6e4b836580F3DBBa741dD89423B971"
    block: 0

# Voting V2 configuration (NoirIDVoting)
# OUR DEPLOYMENT - January 15, 2026
# ProposalsState: 0xa16d9BC3d71acfC4F188A51417811660b285428A
# NoirIDVoting: 0x4Fb46c52C3dFB374D0059866862992389fB25D5f
voting_v2:
  enable: true
  rpc: "https://l2.rarimo.com"
  private_key: "${RELAYER_PRIVATE_KEY}"
  proposal_state_address: "0xa16d9BC3d71acfC4F188A51417811660b285428A"
  block: 0
  gas_limit: 800000
  check_with_subscribe: false

# State replicator configuration (required by service)
replicator:
  address: "0x0000000000000000000000000000000000000000"
  source_smt: "0x479F84502Db545FA8d2275372E0582425204A879" # RegistrationSMT
  root_prefix: "Rarimo root"

# IPFS for proposal metadata
ipfs:
  url: "https://ipfs.rarimo.com/ipfs"

cop:
  disabled: true
